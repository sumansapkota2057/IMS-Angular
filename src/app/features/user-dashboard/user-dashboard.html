<div class="dashboard-container">
  <mat-toolbar color="primary" class="dashboard-toolbar">
    <button mat-icon-button (click)="sidenavOpened = !sidenavOpened">
      <mat-icon>menu</mat-icon>
    </button>
    <span class="toolbar-title">Issue Tracking System</span>
    <span class="spacer"></span>
    <button mat-button [matMenuTriggerFor]="userMenu">
      <mat-icon>account_circle</mat-icon>
      {{ currentUser }}
      <mat-icon>arrow_drop_down</mat-icon>
    </button>
    <mat-menu #userMenu="matMenu">
      <button mat-menu-item disabled>
        <mat-icon>person</mat-icon>
        <span>Profile</span>
      </button>
      <mat-divider></mat-divider>
      <button mat-menu-item (click)="logout()">
        <mat-icon>exit_to_app</mat-icon>
        <span>Logout</span>
      </button>
    </mat-menu>
  </mat-toolbar>

  <mat-sidenav-container class="sidenav-container">
    <mat-sidenav 
      [opened]="sidenavOpened" 
      [mode]="sidenavOpened ? 'side' : 'over'"
      class="sidenav">
      <mat-nav-list>
        <a mat-list-item (click)="selectView('home')" 
           [class.active]="selectedView === 'home'">
          <mat-icon matListItemIcon>home</mat-icon>
          <span matListItemTitle>Home</span>
        </a>
        
        <a mat-list-item (click)="selectView('create')" 
           [class.active]="selectedView === 'create'">
          <mat-icon matListItemIcon>add_circle</mat-icon>
          <span matListItemTitle>Create Post</span>
        </a>

        <a mat-list-item (click)="selectView('my-posts')" 
           [class.active]="selectedView === 'my-posts'">
          <mat-icon matListItemIcon>article</mat-icon>
          <span matListItemTitle>My Posts</span>
        </a>

        <a mat-list-item (click)="selectView('approved')" 
           [class.active]="selectedView === 'approved'">
          <mat-icon matListItemIcon>check_circle</mat-icon>
          <span matListItemTitle>Approved Posts</span>
        </a>
      </mat-nav-list>
    </mat-sidenav>

    <mat-sidenav-content class="main-content">
      <div class="content-wrapper">
        <!-- Home View -->
        <div *ngIf="selectedView === 'home'" class="welcome-section">
          <mat-card class="welcome-card">
            <mat-card-header>
              <mat-card-title>
                <mat-icon class="welcome-icon">waving_hand</mat-icon>
                Welcome, {{ currentUser }}!
              </mat-card-title>
            </mat-card-header>
            <mat-card-content>
              <p class="welcome-text">
                Manage your issues and complaints efficiently. Use the sidebar to navigate through different sections.
              </p>
              <div class="quick-actions">
                <button mat-raised-button color="primary" (click)="selectView('create')">
                  <mat-icon>add</mat-icon>
                  Create New Post
                </button>
                <button mat-raised-button color="accent" (click)="selectView('my-posts')">
                  <mat-icon>list</mat-icon>
                  View My Posts
                </button>
              </div>
            </mat-card-content>
          </mat-card>

          <div class="info-cards">
            <mat-card class="info-card">
              <mat-card-content>
                <mat-icon color="primary">info</mat-icon>
                <h3>Post Types</h3>
                <p>Create issues, complaints, announcements, lost & found, or help requests.</p>
              </mat-card-content>
            </mat-card>

            <mat-card class="info-card">
              <mat-card-content>
                <mat-icon color="accent">pending</mat-icon>
                <h3>Approval Process</h3>
                <p>Submit your posts for admin approval to make them visible to everyone.</p>
              </mat-card-content>
            </mat-card>

            <mat-card class="info-card">
              <mat-card-content>
                <mat-icon color="warn">chat</mat-icon>
                <h3>Discussions</h3>
                <p>Comment on approved posts and engage with the community.</p>
              </mat-card-content>
            </mat-card>
          </div>
        </div>

        <!-- Create Post View -->
        <app-create-post *ngIf="selectedView === 'create'"></app-create-post>

        <!-- My Posts View -->
        <app-my-posts *ngIf="selectedView === 'my-posts'"></app-my-posts>

        <!-- Approved Posts View -->
        <app-approved-posts *ngIf="selectedView === 'approved'"></app-approved-posts>
      </div>
    </mat-sidenav-content>
  </mat-sidenav-container>
</div>